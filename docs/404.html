<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Page Not Found | RideNDine</title>
    <script>
      // SPA redirect for GitHub Pages
      // This script redirects 404s back to index.html with the path preserved
      // Uses same base path detection logic as router.js for consistency
      (function() {
        var pathname = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        var hostname = window.location.hostname;
        
        // Check if we're on GitHub Pages - use endsWith for security
        // Only matches *.github.io, not evil.com/github.io
        var isGitHubPages = hostname.endsWith('.github.io') || hostname === 'github.io';
        
        if (isGitHubPages) {
          // Extract base path using same logic as router
          var pathSegments = pathname.split('/').filter(function(segment) {
            return segment.length > 0;
          });
          
          var basePath = '';
          if (pathSegments.length > 0 && !pathSegments[0].endsWith('.html')) {
            basePath = '/' + pathSegments[0];
          }
          
          // Redirect to index.html, preserving the full path in sessionStorage
          // The router will pick it up and navigate to the correct route
          sessionStorage.setItem('redirectPath', pathname + search + hash);
          window.location.replace(basePath + '/index.html');
        } else {
          // For local development, just redirect to index
          sessionStorage.setItem('redirectPath', pathname + search + hash);
          window.location.replace('/index.html');
        }
      })();
    </script>
    <link rel="stylesheet" href="./styles.css" />
    <style>
      body {
        padding: 32px;
        max-width: 600px;
        margin: 100px auto;
        text-align: center;
      }
      .error-card {
        background: #ffffff;
        border-radius: 20px;
        padding: 60px 40px;
        box-shadow: 0 12px 30px rgba(15, 30, 60, 0.08);
      }
      .error-code {
        font-size: 120px;
        font-weight: 700;
        color: #ff7a18;
        margin: 0;
        line-height: 1;
      }
      .error-title {
        font-size: 32px;
        margin: 20px 0 10px;
        color: #1a202c;
      }
      .error-message {
        color: #718096;
        font-size: 18px;
        margin-bottom: 40px;
      }
    </style>
  </head>
  <body>
    <div class="error-card">
      <h1 class="error-code">404</h1>
      <h2 class="error-title">Redirecting...</h2>
      <p class="error-message">
        Taking you back to the app...
      </p>
    </div>
  </body>
</html>
